<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste Hunter - Carte Interactive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #4D6DB1;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            padding-bottom: 100px;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(135deg, rgba(181, 210, 221, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at 10% 20%, rgba(181, 210, 221, 0.3) 0%, transparent 40%);
            opacity: 0.6;
            z-index: 0;
            pointer-events: none;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            position: relative;
            z-index: 1;
        }

        .title {
            color: #b5d2dd;
            font-size: 72px;
            font-weight: 300;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .main-container {
            display: flex;
            gap: 20px;
            padding: 0 20px 20px;
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .left-panel {
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .info-box, .legend-box {
            background-color: #fff;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .info-box h3 {
            color: #000;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .zone-status {
            color: #c26c7a;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .info-detail {
            margin-bottom: 10px;
        }

        .info-label {
            color: #666;
            font-size: 14px;
        }

        .info-value {
            color: #c26c7a;
            font-size: 16px;
            font-weight: 600;
        }

        .event-date-box {
            background-color: #aa44ff;
            color: #fff;
            padding: 12px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .event-date-label {
            font-size: 13px;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .event-date-value {
            font-size: 18px;
            font-weight: 700;
        }

        .btn-plan, .btn-join {
            width: 100%;
            padding: 15px;
            background-color: #c26c7a;
            color: #fff;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-plan:hover, .btn-join:hover {
            background-color: #b05867;
            transform: translateY(-2px);
        }

        .btn-join {
            background-color: #aa44ff;
        }

        .btn-join:hover {
            background-color: #8833cc;
        }

        .legend-box h3 {
            color: #000;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .legend-color {
            width: 60px;
            height: 20px;
            border-radius: 4px;
            margin-right: 12px;
        }

        .legend-text {
            color: #333;
            font-size: 14px;
            line-height: 1.3;
        }

        .map-container {
            flex: 1;
            background-color: #fff;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            min-height: 600px;
        }

        #map {
            width: 100%;
            height: 600px;
            border-radius: 10px;
        }

        /* === MENU DE NAVIGATION === */
        .navigation-menu {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #b5d2dd;
            border-radius: 50px;
            padding: 15px 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #4D6DB1;
            min-width: 80px;
        }

        .nav-item:hover {
            background-color: rgba(77, 109, 177, 0.15);
            transform: translateY(-3px);
        }

        .nav-item.active {
            background-color: #4D6DB1;
            color: #fff;
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .settings-btn {
            background-color: #c26c7a;
            color: #fff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
            border: none;
            font-size: 24px;
        }

        .settings-btn:hover {
            background-color: #b05867;
            transform: rotate(90deg) scale(1.1);
        }

        .leaflet-popup-content-wrapper {
            border-radius: 10px;
        }

        .leaflet-popup-content {
            margin: 15px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }

            .left-panel {
                width: 100%;
                flex-direction: row;
            }

            .info-box, .legend-box {
                flex: 1;
            }

            .title {
                font-size: 48px;
            }
        }

         /* === MENU DE NAVIGATION === */
        .navigation-menu {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #b5d2dd;
            border-radius: 50px;
            padding: 15px 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #4D6DB1;
            min-width: 80px;
        }

        .nav-item:hover {
            background-color: rgba(77, 109, 177, 0.15);
            transform: translateY(-3px);
        }

        .nav-item.active {
            background-color: #4D6DB1;
            color: #fff;
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .settings-btn {
            background-color: #c26c7a;
            color: #fff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
            border: none;
            font-size: 24px;
        }

        .settings-btn:hover {
            background-color: #b05867;
            transform: rotate(90deg) scale(1.1);
        }

        @media (max-width: 968px) {
            .navigation-menu {
                width: 95%;
                padding: 10px 15px;
                gap: 5px;
            }

            .nav-item {
                padding: 10px 12px;
                min-width: 60px;
            }

            .nav-icon {
                font-size: 20px;
            }

            .nav-label {
                font-size: 10px;
            }
        }

        @media (max-width: 768px) {
            .left-panel {
                flex-direction: column;
            }

            .title {
                font-size: 36px;
            }

            #map {
                height: 400px;
            }

            .navigation-menu {
                width: 95%;
                padding: 10px 15px;
                gap: 5px;
            }

            .nav-item {
                padding: 10px 12px;
                min-width: 60px;
            }

            .nav-icon {
                font-size: 20px;
            }

            .nav-label {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- MENU DE NAVIGATION -->
    <nav class="navigation-menu">
        <a href="index.html" class="nav-item active">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">Accueil</div>
        </a>
        <a href="impact.html" class="nav-item">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">Impact</div>
        </a>
        <a href="discussion.html" class="nav-item">
            <div class="nav-icon">üí¨</div>
            <div class="nav-label">Discussion</div>
        </a>
        <a href="calendrier.html" class="nav-item">
            <div class="nav-icon">üìÖ</div>
            <div class="nav-label">Calendrier</div>
        </a>
        <button class="settings-btn" onclick="window.location.href='parametres.html'">‚öôÔ∏è</button>
    </nav>

    <div class="header">
        <h1 class="title">Waste Hunter</h1>
    </div>

    <div class="main-container">
        <div class="left-panel">
            <div class="info-box">
                <h3>Zone s√©lectionn√©e :</h3>
                <p class="zone-status" id="zone-status">S√©lectionnez une zone sur la carte</p>
                
                <div id="event-date-container" style="display: none;">
                    <div class="event-date-box">
                        <div class="event-date-label">Ramassage pr√©vu le :</div>
                        <div class="event-date-value" id="event-date">-</div>
                    </div>
                </div>

                <div id="regular-info" style="display: none;">
                    <div class="info-detail">
                        <div class="info-label">Dernier ramassage :</div>
                        <div class="info-value" id="last-cleanup">-</div>
                    </div>
                    <div class="info-detail">
                        <div class="info-value" id="participants">-</div>
                    </div>
                </div>

                <button class="btn-plan" id="plan-btn" style="display: none;">PLANIFIER UN RAMASSAGE</button>
                <button class="btn-join" id="join-btn" style="display: none;">JE VEUX ME JOINDRE √Ä L'√âV√âNEMENT</button>
            </div>

            <div class="legend-box">
                <h3>L√©gendes :</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #ff4444;"></div>
                    <div class="legend-text">La zone est pollu√©e un ramassage est √† pr√©voir</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #ffaa44;"></div>
                    <div class="legend-text">La zone est partiellement nettoy√©e</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #44aa44;"></div>
                    <div class="legend-text">La zone est propre</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #aa44ff;"></div>
                    <div class="legend-text">La zone va √™tre nettoy√©e tr√®s prochainement</div>
                </div>
            </div>
        </div>

        <div class="map-container">
            <div id="map"></div>
        </div>
    </div>

        <!-- MENU DE NAVIGATION -->
    <nav class="navigation-menu">
        <a href="index.html" class="nav-item">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">Accueil</div>
        </a>
        <a href="Impact.html" class="nav-item">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">Impact</div>
        </a>
        <a href="discussion_barre_recherche.html" class="nav-item">
            <div class="nav-icon">üí¨</div>
            <div class="nav-label">Discussion</div>
        </a>
        <a href="index_calendrier.html" class="nav-item">
            <div class="nav-icon">üìÖ</div>
            <div class="nav-label">Calendrier</div>
        </a>
        <button class="settings-btn" onclick="window.location.href='parametres.html'">‚öôÔ∏è</button>
    </nav>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // V√©rifier si un utilisateur est connect√©
        const currentUser = localStorage.getItem('currentUser');
        if(!currentUser){
            alert("Vous devez √™tre connect√© pour acc√©der au quiz !");
            window.location.href = "connexion.html";
        }

        // Optionnel : afficher le nom de l'utilisateur
        const title = document.querySelector('.title');
        title.textContent += " - Bonjour " + currentUser;

        // Initialisation de la carte centr√©e sur la rade de Brest
        const map = L.map('map').setView([48.38, -4.49], 12);

        // Ajout de la couche de tuiles OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);

        // Fonction pour g√©n√©rer une date future pour les √©v√©nements (entre 1 et 30 jours)
        function getFutureEventDate() {
            const today = new Date('2026-01-22');
            const daysAhead = Math.floor(Math.random() * 30) + 1;
            const date = new Date(today);
            date.setDate(date.getDate() + daysAhead);
            return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`;
        }

        // Fonction pour g√©n√©rer une couleur al√©atoire selon les statuts
        function getRandomStatus() {
            const statuses = [
                { color: "#44aa44", status: "La zone est propre", weight: 60 },
                { color: "#ffaa44", status: "La zone est partiellement nettoy√©e, planifier un nouveau ramassage pour arriver √† l'objectif : Z√©ro d√©chet", weight: 20 },
                { color: "#ff4444", status: "La zone est pollu√©e un ramassage est √† pr√©voir", weight: 10 },
                { color: "#aa44ff", status: "La zone va √™tre nettoy√©e tr√®s prochainement", weight: 10 }
            ];
           
            const rand = Math.random() * 100;
            let sum = 0;
            for (let s of statuses) {
                sum += s.weight;
                if (rand <= sum) return s;
            }
            return statuses[0];
        }

        // Fonction pour g√©n√©rer une date al√©atoire dans les 60 derniers jours
        function getRandomDate() {
            const today = new Date('2026-01-22');
            const daysAgo = Math.floor(Math.random() * 60);
            const date = new Date(today);
            date.setDate(date.getDate() - daysAgo);
            return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`;
        }

        // Fonction pour g√©n√©rer un nombre de participants
        function getRandomParticipants() {
            const count = Math.floor(Math.random() * 15) + 3;
            const emoji = 'üë•'.repeat(Math.ceil(count / 3));
            return `${count} participants ${emoji}`;
        }

        // Donn√©es des zones - d√©coupage complet de la rade de Brest
        const zonesData = [
            // C√¥te Nord-Ouest (Le Conquet - Pointe Saint-Mathieu)
            { name: "Le Conquet - Plage des Blancs Sablons", coordinates: [[48.365, -4.785], [48.368, -4.775], [48.363, -4.770], [48.360, -4.780]] },
            { name: "Pointe de Kermorvan", coordinates: [[48.355, -4.780], [48.358, -4.770], [48.353, -4.765], [48.350, -4.775]] },
            { name: "Pointe Saint-Mathieu", coordinates: [[48.340, -4.775], [48.343, -4.765], [48.338, -4.760], [48.335, -4.770]] },
           
            // C√¥te Nord (Plouzan√© - Porspoder)
            { name: "Plouzan√© - Trez-Hir", coordinates: [[48.380, -4.680], [48.383, -4.670], [48.378, -4.665], [48.375, -4.675]] },
            { name: "Porspoder Nord", coordinates: [[48.395, -4.675], [48.398, -4.665], [48.393, -4.660], [48.390, -4.670]] },
            { name: "Anse de Porspaul", coordinates: [[48.405, -4.670], [48.408, -4.660], [48.403, -4.655], [48.400, -4.665]] },
            { name: "Lampaul-Ploudalm√©zeau", coordinates: [[48.420, -4.660], [48.423, -4.650], [48.418, -4.645], [48.415, -4.655]] },
           
            // C√¥te Nord-Est (Anse de Berthaume - Brest Nord)
            { name: "Anse de Berthaume", coordinates: [[48.345, -4.680], [48.348, -4.670], [48.343, -4.665], [48.340, -4.675]] },
            { name: "Plage de Trez-Hir Sud", coordinates: [[48.360, -4.645], [48.363, -4.635], [48.358, -4.630], [48.355, -4.640]] },
            { name: "Pointe des Espagnols", coordinates: [[48.330, -4.625], [48.333, -4.615], [48.328, -4.610], [48.325, -4.620]] },
           
            // Brest - C√¥te urbaine
            { name: "Port de Commerce Brest", coordinates: [[48.380, -4.500], [48.383, -4.490], [48.378, -4.485], [48.375, -4.495]] },
            { name: "Port de Plaisance Moulin Blanc", coordinates: [[48.405, -4.445], [48.408, -4.435], [48.403, -4.430], [48.400, -4.440]] },
            { name: "Plage du Moulin Blanc", coordinates: [[48.410, -4.430], [48.413, -4.420], [48.408, -4.415], [48.405, -4.425]] },
            { name: "Oc√©anopolis - Pointe du Diable", coordinates: [[48.415, -4.425], [48.418, -4.415], [48.413, -4.410], [48.410, -4.420]] },
            { name: "Le Relecq-Kerhuon", coordinates: [[48.420, -4.410], [48.423, -4.400], [48.418, -4.395], [48.415, -4.405]] },
           
            // Rive Est (Plougastel)
            { name: "Plougastel - Pointe de l'Armorique", coordinates: [[48.385, -4.360], [48.388, -4.350], [48.383, -4.345], [48.380, -4.355]] },
            { name: "Lauberlac'h", coordinates: [[48.370, -4.350], [48.373, -4.340], [48.368, -4.335], [48.365, -4.345]] },
            { name: "Kerfaven", coordinates: [[48.360, -4.340], [48.363, -4.330], [48.358, -4.325], [48.355, -4.335]] },
            { name: "Pointe de Penfeld", coordinates: [[48.350, -4.330], [48.353, -4.320], [48.348, -4.315], [48.345, -4.325]] },
           
            // Fond de rade (Daoulas - Logonna)
            { name: "Logonna-Daoulas", coordinates: [[48.340, -4.310], [48.343, -4.300], [48.338, -4.295], [48.335, -4.305]] },
            { name: "Daoulas - Port", coordinates: [[48.355, -4.265], [48.358, -4.255], [48.353, -4.250], [48.350, -4.260]] },
            { name: "Anse de Poulmic", coordinates: [[48.345, -4.250], [48.348, -4.240], [48.343, -4.235], [48.340, -4.245]] },
            { name: "L'H√¥pital-Camfrout", coordinates: [[48.335, -4.240], [48.338, -4.230], [48.333, -4.225], [48.330, -4.235]] },
           
            // Rive Sud-Est (Land√©vennec - Rosno√´n)
            { name: "Land√©vennec - Abbaye", coordinates: [[48.295, -4.270], [48.298, -4.260], [48.293, -4.255], [48.290, -4.265]] },
            { name: "Pointe de Pen ar Vir", coordinates: [[48.285, -4.265], [48.288, -4.255], [48.283, -4.250], [48.280, -4.260]] },
            { name: "Rosno√´n", coordinates: [[48.320, -4.245], [48.323, -4.235], [48.318, -4.230], [48.315, -4.240]] },
            { name: "T√©r√©nez", coordinates: [[48.310, -4.235], [48.313, -4.225], [48.308, -4.220], [48.305, -4.230]] },
           
            // Presqu'√Æle de Crozon - Nord
            { name: "Le Fret", coordinates: [[48.290, -4.505], [48.293, -4.495], [48.288, -4.490], [48.285, -4.500]] },
            { name: "Crozon - Plage de l'Aber", coordinates: [[48.280, -4.490], [48.283, -4.480], [48.278, -4.475], [48.275, -4.485]] },
            { name: "Lanv√©oc", coordinates: [[48.285, -4.465], [48.288, -4.455], [48.283, -4.450], [48.280, -4.460]] },
            { name: "√éle Longue", coordinates: [[48.275, -4.450], [48.278, -4.440], [48.273, -4.435], [48.270, -4.445]] },
           
            // Presqu'√Æle de Crozon - Ouest
            { name: "Roscanvel - Plage de Pen ar Vir", coordinates: [[48.315, -4.545], [48.318, -4.535], [48.313, -4.530], [48.310, -4.540]] },
            { name: "Qu√©lern", coordinates: [[48.305, -4.540], [48.308, -4.530], [48.303, -4.525], [48.300, -4.535]] },
            { name: "Pointe des Espagnols Sud", coordinates: [[48.325, -4.585], [48.328, -4.575], [48.323, -4.570], [48.320, -4.580]] },
            { name: "Fort de Cornouaille", coordinates: [[48.335, -4.600], [48.338, -4.590], [48.333, -4.585], [48.330, -4.595]] },
           
            // Goulet de Brest
            { name: "Pointe du Petit Minou", coordinates: [[48.345, -4.615], [48.348, -4.605], [48.343, -4.600], [48.340, -4.610]] },
            { name: "Pointe du Portzic", coordinates: [[48.355, -4.600], [48.358, -4.590], [48.353, -4.585], [48.350, -4.595]] },
            { name: "Anse du Moulin Blanc Sud", coordinates: [[48.365, -4.585], [48.368, -4.575], [48.363, -4.570], [48.360, -4.580]] },
            { name: "Passage du Goulet", coordinates: [[48.340, -4.560], [48.343, -4.550], [48.338, -4.545], [48.335, -4.555]] }
        ];

        // Ajouter les donn√©es al√©atoires √† chaque zone
        zonesData.forEach(zone => {
            const statusData = getRandomStatus();
            zone.status = statusData.status;
            zone.color = statusData.color;
            zone.lastCleanup = getRandomDate();
            zone.participants = getRandomParticipants();
            
            // Si la zone est violette (√©v√©nement pr√©vu), ajouter une date d'√©v√©nement
            if (zone.color === '#aa44ff') {
                zone.eventDate = getFutureEventDate();
            }
        });

        let selectedPolygon = null;
        const polygons = [];

        // Cr√©ation des polygones pour chaque zone
        zonesData.forEach((zone, index) => {
            const polygon = L.polygon(zone.coordinates, {
                color: '#2d5016',
                fillColor: zone.color,
                fillOpacity: 0.6,
                weight: 3
            }).addTo(map);

            // Popup au survol
            polygon.bindPopup(`<b>${zone.name}</b><br>${zone.status}`);

            // Gestion du clic
            polygon.on('click', function() {
                // R√©initialiser le style de l'ancien polygone s√©lectionn√©
                if (selectedPolygon) {
                    selectedPolygon.setStyle({
                        weight: 3,
                        color: '#2d5016'
                    });
                }

                // Mettre en √©vidence le nouveau polygone
                this.setStyle({
                    weight: 5,
                    color: '#000000'
                });
                selectedPolygon = this;

                // Mettre √† jour les informations
                document.getElementById('zone-status').textContent = zone.status;

                const eventDateContainer = document.getElementById('event-date-container');
                const regularInfo = document.getElementById('regular-info');
                const planBtn = document.getElementById('plan-btn');
                const joinBtn = document.getElementById('join-btn');

                // Si la zone est violette (√©v√©nement pr√©vu)
                if (zone.color === '#aa44ff') {
                    // Afficher la date de l'√©v√©nement
                    eventDateContainer.style.display = 'block';
                    document.getElementById('event-date').textContent = zone.eventDate;
                    
                    // Masquer les infos r√©guli√®res
                    regularInfo.style.display = 'none';
                    
                    // Afficher le bouton "Je veux me joindre"
                    joinBtn.style.display = 'block';
                    planBtn.style.display = 'none';
                } else {
                    // Masquer la date de l'√©v√©nement
                    eventDateContainer.style.display = 'none';
                    
                    // Afficher les infos r√©guli√®res
                    regularInfo.style.display = 'block';
                    document.getElementById('last-cleanup').textContent = zone.lastCleanup;
                    document.getElementById('participants').textContent = zone.participants;
                    
                    // Afficher le bouton "Planifier" si n√©cessaire
                    joinBtn.style.display = 'none';
                    if (zone.color === '#ff4444' || zone.color === '#ffaa44') {
                        planBtn.style.display = 'block';
                    } else {
                        planBtn.style.display = 'none';
                    }
                }
            });

            // Effet de survol
            polygon.on('mouseover', function() {
                if (this !== selectedPolygon) {
                    this.setStyle({
                        fillOpacity: 0.8
                    });
                }
            });

            polygon.on('mouseout', function() {
                if (this !== selectedPolygon) {
                    this.setStyle({
                        fillOpacity: 0.6
                    });
                }
            });

            polygons.push(polygon);
        });

        // Gestion du bouton planifier
        document.getElementById('plan-btn').addEventListener('click', function() {
            alert('Redirection vers la page de planification d\'√©v√©nement...');
            // window.location.href = 'calendrier.html';
        });

        // Gestion du bouton "Je veux me joindre √† l'√©v√©nement"
        document.getElementById('join-btn').addEventListener('click', function() {
            alert('Votre participation √† l\'√©v√©nement a √©t√© enregistr√©e ! Vous recevrez une confirmation par email.');
        });
    </script>
</body>
</html>