<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Waste Hunter - Inscription</title>
<link rel="stylesheet" href="style_connexion.css">
</head>
<body>
<div class="container">
    <div class="wave-decoration"></div>
    
    <h1 class="title">Waste Hunter</h1>
    
    <div class="login-box">
        <h2>Créez votre compte</h2>
        
        <form id="signupForm">
            <div class="form-group">
                <label for="username">Nom d'utilisateur</label>
                <input type="text" id="username" name="username" required>
            </div>
            
            <div class="form-group">
                <label for="email">Adresse email</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="password">Mot de passe</label>
                <input type="password" id="password" name="password" required>
            </div>
            
            <div class="form-group">
                <label for="confirm-password">Confirmer le mot de passe</label>
                <input type="password" id="confirm-password" name="confirm-password" required>
            </div>
            
            <p id="signupError" class="error-message"></p>
            
            <button type="submit" class="btn-login">S'INSCRIRE</button>
        </form>
        
        <p class="signup-link">
            VOUS AVEZ DÉJÀ UN COMPTE ? <a href="connexion.html">CONNECTEZ-VOUS !</a>
        </p>
    </div>
</div>

<script>
const signupForm = document.getElementById('signupForm');
const signupError = document.getElementById('signupError');

signupForm.addEventListener('submit', function(e){
    e.preventDefault();

    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirm-password').value;

    signupError.textContent = "";

    if(password !== confirmPassword){
        signupError.textContent = "Les mots de passe ne correspondent pas !";
        return;
    }

    let users = JSON.parse(localStorage.getItem('users') || '[]');

    if(users.find(u => u.username === username)){
        signupError.textContent = "Ce nom d'utilisateur est déjà utilisé !";
        return;
    }

    // Ajouter l'utilisateur
    users.push({ username, email, password });
    localStorage.setItem('users', JSON.stringify(users));

    // Mettre l'utilisateur courant pour session
    localStorage.setItem('currentUser', username);

    // Rediriger vers le quiz
    window.location.href = "connexion.html";
});
</script>
</body>
</html>
